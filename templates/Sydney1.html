{% extends "base.html" %}

{% block title %}Jobs Clock-In Clock-Out{% endblock %}

{% block content %}
<main class="page-container py-4">
  <div class="container">

    <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between mb-4">
      <h1 class="h4 m-0">Sydney Production System</h1>
    </div>

    <!-- Two-column layout -->
    <div class="row g-4">
      
      <!-- Left: Staff & Job -->
      <div class="col-lg-4">
        <div class="card shadow-sm h-100">
          <div class="card-header bg-light fw-bold">Staff & Job Selection</div>
          <div class="card-body">
            <label for="staff-select" class="form-label">Select Staff:</label>
            <select id="staff-select" class="form-select mb-3">
              <option value="">-- Select Staff --</option>
            </select>

            <label for="job-select" class="form-label">Select Job:</label>
            <select id="job-select" class="form-select">
              <option value="">-- Select Job --</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Right: Task Tiles -->
      <div class="col-lg-8">
        <div class="card shadow-sm h-100">
          <div class="card-header bg-light fw-bold">Tasks</div>
          <div class="card-body">
            <div class="row g-3" id="task-selection">
              <div class="col-md-3 col-sm-6">
                <div class="task-tile welding" data-task="welding"><div class="task-text">Welding</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile shrinking" data-task="shrinking"><div class="task-text">Shrinking</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile gluing" data-task="gluing"><div class="task-text">Gluing</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile soldering" data-task="soldering"><div class="task-text">Soldering</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile packaging" data-task="packaging"><div class="task-text">Packaging</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile machineshop" data-task="machineshop"><div class="task-text">Machine Shop</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile QC" data-task="QC"><div class="task-text">QC</div></div>
              </div>
              <div class="col-md-3 col-sm-6">
                <div class="task-tile express" data-task="express"><div class="task-text">Express</div></div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Action buttons -->
    <div class="d-flex flex-wrap gap-3 justify-content-center my-5">
      <button id="start-btn" type="button" class="btn btn-success px-4 py-2 rounded-pill">Start</button>
      <button id="stop-btn" type="button" class="btn btn-danger px-4 py-2 rounded-pill">Stop</button>
      <button id="finish-btn" data-role="admin-only" type="button" class="btn btn-warning px-4 py-2 rounded-pill">End Job</button>
      <button id="view-running-jobs-btn" type="button" class="btn btn-primary px-4 py-2 rounded-pill" data-bs-toggle="modal"
        data-bs-target="#taskOptionsModal">View Running Jobs</button>
      <button id="jobs-status-btn" class="btn btn-primary px-4 py-2 rounded-pill">Jobs Status</button>
    </div>

    <div id="message" class="fw-bold text-center mb-3"></div>

    <!-- Running Jobs Table -->
    <div id="running-jobs-section" style="display: none;">
      <h4 id="running-jobs-title">Running Jobs</h4>
      <table id="running-jobs-table" class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Staff</th>
            <th>Job ID</th>
            <th>Customer</th>
            <th>Drawing No</th>
            <th>Task</th>
            <th>Start Time</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Records Table -->
    <div class="table-container">
      <table id="records-table" class="table table-bordered table-striped">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div id="pagination-controls" class="text-center" style="display:none;">
      <button id="prev-page" class="btn btn-outline-secondary btn-sm">Previous</button>
      <span id="page-info" class="mx-2"></span>
      <button id="next-page" class="btn btn-outline-secondary btn-sm">Next</button>
    </div>

  </div>
</main>

<!-- (Modals unchanged) -->
{% endblock %}
